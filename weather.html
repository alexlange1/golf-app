<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weather Forecast - Fairway Friends</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav>
    <div class="nav-container">
      <div class="nav-left">
        <div class="logo-circle">
          <!-- Target SVG Icon -->
          <svg width="24" height="24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <circle cx="12" cy="12" r="6"/>
            <circle cx="12" cy="12" r="2"/>
          </svg>
        </div>
        <div>
          <h1>Fairway Friends</h1>
          <p class="subtitle">Score. Compete. Connect on the green.</p>
        </div>
      </div>
      <div class="nav-right">
        <a href="index.php">Home</a>
        <a href="weather.html">Weather</a>
        <a href="courses.html">Courses</a>
        <a href="leaderboard.html">Leaderboard</a>
        <a href="profile.html">Profile</a>
      </div>
    </div>
  </nav>
  <main>
    <section style="text-align:center; margin-bottom: 32px;">
      <h2 style="font-size:2rem; color:#166534; font-weight:bold; margin-bottom:8px;">Weather Forecast</h2>
      <p style="color:#16a34a;">Plan your perfect round</p>
    </section>
    <!-- Current Conditions Card -->
    <section class="welcome-card" style="max-width:700px; margin:0 auto 32px auto;">
      <h3 style="font-size:1.5rem; color:#166534; font-weight:bold; margin-bottom:8px; display:flex; align-items:center; justify-content:center; gap:8px;">
        <svg width="32" height="32" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="16" cy="16" r="6"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="16" y1="26" x2="16" y2="30"/>
          <line x1="2" y1="16" x2="6" y2="16"/>
          <line x1="26" y1="16" x2="30" y2="16"/>
        </svg>
        Current Conditions
      </h3>
      <p id="weather-location" style="color:#16a34a; margin-bottom:16px;">Barcelona, Spain</p>
      <div id="weather-temp" style="font-size:3rem; color:#166534; font-weight:bold; margin-bottom:16px;">--&deg;C</div>
      <div style="display:flex; flex-wrap:wrap; justify-content:center; gap:32px;">
        <div style="text-align:center;">
          <svg width="24" height="24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.8 19.6A2 2 0 1 0 14 16H2"/><path d="M17.5 8a2.5 2.5 0 1 1 2 4H2"/><path d="M9.8 4.4A2 2 0 1 1 11 8H2"/></svg>
          <div style="font-size:0.95rem; color:#16a34a;">Wind</div>
          <div id="weather-wind" style="font-weight:bold; color:#166534;">--</div>
        </div>
        <div style="text-align:center;">
          <svg width="24" height="24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"/><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"/></svg>
          <div style="font-size:0.95rem; color:#16a34a;">Humidity</div>
          <div id="weather-humidity" style="font-weight:bold; color:#166534;">--</div>
        </div>
        <div style="text-align:center;">
          <svg width="24" height="24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/></svg>
          <div style="font-size:0.95rem; color:#16a34a;">Clouds</div>
          <div id="weather-clouds" style="font-weight:bold; color:#166534;">--</div>
        </div>
        <div style="text-align:center;">
          <svg width="24" height="24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></svg>
          <div style="font-size:0.95rem; color:#16a34a;">Feels Like</div>
          <div id="weather-feels" style="font-weight:bold; color:#166534;">--</div>
        </div>
      </div>
    </section>
    <!-- Recommended Tee Times -->
    <section class="welcome-card" style="max-width:700px; margin:0 auto 32px auto;">
      <h3 style="font-size:1.5rem; color:#166534; font-weight:bold; margin-bottom:8px;">Recommended Tee Times</h3>
      <p style="color:#16a34a; margin-bottom:16px;">Best conditions for your round today</p>
      <div style="display:flex; flex-wrap:wrap; gap:16px; justify-content:center;">
        <div style="background:#f0fdf4; border:1px solid #bbf7d0; border-radius:10px; padding:16px 24px; min-width:180px;">
          <div style="font-weight:bold; color:#166534;">9 AM - 11 AM</div>
          <div style="color:#16a34a; font-size:0.95rem;">Perfect conditions</div>
        </div>
        <div style="background:#f0fdf4; border:1px solid #bbf7d0; border-radius:10px; padding:16px 24px; min-width:180px;">
          <div style="font-weight:bold; color:#166534;">2 PM - 4 PM</div>
          <div style="color:#16a34a; font-size:0.95rem;">Perfect conditions</div>
        </div>
      </div>
    </section>
    <!-- Hourly Forecast -->
    <section class="welcome-card" style="max-width:900px; margin:0 auto 32px auto;">
      <h3 style="font-size:1.5rem; color:#166534; font-weight:bold; margin-bottom:8px;">Hourly Forecast</h3>
      <p style="color:#16a34a; margin-bottom:16px;">Plan your round timing</p>
      <div id="hourly-forecast" style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;"></div>
    </section>
  </main>
  <script>
    // Fetch Barcelona weather from backend proxy
    fetch('weather-proxy.php')
      .then(res => res.json())
      .then(data => {
        console.log('Weather API response:', data);
        if (data.error) {
          document.getElementById('weather-temp').textContent = '--';
          document.getElementById('weather-wind').textContent = '--';
          document.getElementById('weather-humidity').textContent = '--';
          document.getElementById('weather-clouds').textContent = '--';
          document.getElementById('weather-feels').textContent = '--';
          alert('Weather API error: ' + data.error + '\nHTTP code: ' + data.http_code);
          return;
        }
        document.getElementById('weather-temp').innerHTML = `${Math.round(data.main.temp)}&deg;C`;
        document.getElementById('weather-wind').textContent = `${data.wind.speed} m/s`;
        document.getElementById('weather-humidity').textContent = `${data.main.humidity}%`;
        document.getElementById('weather-clouds').textContent = `${data.clouds.all}%`;
        document.getElementById('weather-feels').innerHTML = `${Math.round(data.main.feels_like)}&deg;C`;
        // Hourly forecast
        const hourlyDiv = document.getElementById('hourly-forecast');
        if (data.hourly && Array.isArray(data.hourly)) {
          hourlyDiv.innerHTML = data.hourly.map(hour => {
            const date = new Date(hour.dt * 1000);
            let hourLabel = date.getHours();
            let ampm = hourLabel >= 12 ? 'PM' : 'AM';
            hourLabel = hourLabel % 12;
            if (hourLabel === 0) hourLabel = 12;
            const iconUrl = `https://openweathermap.org/img/wn/${hour.icon}@2x.png`;
            return `
              <div style="background:#f0fdf4; border-radius:10px; padding:12px 16px; text-align:center; min-width:80px;">
                <div style="color:#166534; font-weight:500; margin-bottom:4px;">${hourLabel} ${ampm}</div>
                <img src="${iconUrl}" alt="${hour.main}" style="width:32px; height:32px; margin-bottom:2px;" />
                <div style="font-size:1.2rem; font-weight:bold; color:#166534;">${Math.round(hour.temp)}&deg;</div>
              </div>
            `;
          }).join('');
        }
      })
      .catch((err) => {
        console.error('Weather fetch error:', err);
        document.getElementById('weather-temp').textContent = '--';
        document.getElementById('weather-wind').textContent = '--';
        document.getElementById('weather-humidity').textContent = '--';
        document.getElementById('weather-clouds').textContent = '--';
        document.getElementById('weather-feels').textContent = '--';
      });
  </script>
</body>
</html> 